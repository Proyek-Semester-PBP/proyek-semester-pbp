{% extends 'base.html' %}

{% block meta %}
<title>Drop Off</title>
{% endblock meta %}

{% block content %}

<style>
    input, textarea {
        padding: 0.5rem;
        border: 1px solid;
        border-radius: 8px;
        width: 100%
    }
</style>


<script>
    function posting(e) {
      e.preventDefault()
      const name = $("#id_name").val()
      const weight = $("#id_weight").val()
      const location = $("input[type='radio']:checked").val()
      const description = $("#id_description").val()

      const data = {
        type: "dropoff",
        name: name,
        weight: weight,
        location: location,
        description: description,
        csrfmiddlewaretoken: "{{ csrf_token }}"
      }
      
      $.ajax({
        type: 'POST',
        url: '{% url "recycle:add_history" %}',
        data: data,
      });

    }

    $(document).ready(() => {
      $("#dropoff-btn").click(posting)
    })
</script>

<div class="position-relative mx-auto container flex flex-col gap-4 pt-8" style="margin-top: 15px; text-align: center">
    <div class ="rounded-lg p-4 flex flex-col gap-4 mx-auto bg-base-100;" >
    
        <h1 style="padding-bottom: 10px; font-size: 40px;" class="font-monospace fw-semibold text-center">Drop Off Form</h1>
    
        <form method="POST" action="" style="display: inline-block;">
            {% csrf_token %}
            <table>
                {{ dropoff_form.as_table }}
                <tr>
                    <td colspan="2">
                        <input style="width: 100%; margin-top: 20px; margin-bottom: 7px;" id="dropoff-btn" class="btn btn btn-dark" type="submit" value="Submit">
                    </td>
                </tr>
            </table>
        </form>
       
    </div>
</div>

{% endblock content %}