{% extends 'base.html' %}

{% block meta %}
<title>Pick Up</title>
{% endblock meta %}

{% block content %}

<style>
    input, textarea {
        padding: 0.5rem;
        border: 1px solid;
        border-radius: 8px;
        width: 100%
    }
</style>

<script>
    function posting(e) {
      e.preventDefault()
      const name = $("#id_name").val()
      const weight = $("#id_weight").val()
      const region = $("#id_region").val()
      const city = $("#id_city").val()
      const subdistrict = $("#id_subdistrict").val()
      const zip_code = $("#id_zip_code").val()
      const detail= $("#id_address_detail").val()
      const description = $("#id_description").val()

      const data = {
        type: "pickup",
        name: name,
        weight: weight,
        region: region,
        city: city,
        subdistrict: subdistrict,
        zip_code: zip_code,
        detail: detail,
        description: description,
        csrfmiddlewaretoken: "{{ csrf_token }}"
      }
      
      $.ajax({
        type: 'POST',
        url: '{% url "recycle:add_history" %}',
        data: data,
      });

    }

    $(document).ready(() => {
      $("#pickup-btn").click(posting)
    })
</script>

<div class="position-relative mx-auto container flex flex-col gap-4 pt-8" style="margin-top: 15px; text-align: center">
    <div class ="rounded-lg p-4 flex flex-col gap-4 mx-auto bg-base-100;" >
    
        <h1 style="padding-bottom: 10px; font-size: 40px;" class="font-monospace fw-semibold text-center">Pick Up Form</h1>
    
        <form method="POST" action="" style="display: inline-block;">
            {% csrf_token %}
            <table>
                {{ pickup_form.as_table }}
                <tr>
                    <td colspan="2">
                        <input id="pickup-btn" style="width: 100%; margin-top: 20px; margin-bottom: 7px;" class="btn btn btn-dark" type="submit" value="Submit">
                    </td>
                </tr>
            </table>
        </form>
       
    </div>
</div>

{% endblock content %}